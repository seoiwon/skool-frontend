(()=>{var e={};e.id=41,e.ids=[41],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2601:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=r(6577),i=r(5533),l=r(443),a=r.n(l),n=r(3320),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(s,o);let d=["",{children:["courses",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5702)),"/home/mustard-3/Documents/code/skool/frontend/app/courses/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5818)),"/home/mustard-3/Documents/code/skool/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,1459,23)),"next/dist/client/components/not-found-error"]}],c=["/home/mustard-3/Documents/code/skool/frontend/app/courses/[id]/page.tsx"],m="/courses/[id]/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/courses/[id]/page",pathname:"/courses/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8216:(e,s,r)=>{Promise.resolve().then(r.bind(r,1010))},1010:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>CourseDetailPage});var t=r(2406),i=r(404),l=r(6460),a=r(1264),n=r(5731),o=r.n(n),d=r(5434),c=r(2646);function CourseDetailPage(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),[r,n]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)("overview"),[j,v]=(0,i.useState)(!1);(0,i.useEffect)(()=>{fetchCourseDetails(),checkEnrollment();let handleBeforeUnload=()=>{sessionStorage.setItem("scrollPosition",window.scrollY.toString())};return window.addEventListener("beforeunload",handleBeforeUnload),()=>{window.removeEventListener("beforeunload",handleBeforeUnload)}},[e.id]);let fetchCourseDetails=async()=>{try{let{data:s,error:r}=await d.O.from("courses").select(`
          id,
          title,
          description,
          category,
          level,
          duration,
          lessons_count,
          students_count,
          rating,
          price,
          instructor,
          thumbnail
        `).eq("id",e.id).single();if(r){console.error("강의 정보 조회 실패:",r),n(null);return}let{data:t}=await d.O.from("course_objectives").select("objective").eq("course_id",e.id).order("order_index"),{data:i}=await d.O.from("course_requirements").select("requirement").eq("course_id",e.id).order("order_index"),{data:l}=await d.O.from("course_sections").select(`
          id,
          title,
          order_index,
          course_lessons (
            id,
            title,
            duration,
            preview,
            order_index
          )
        `).eq("course_id",e.id).order("order_index"),a=t?.map(e=>e.objective)||[],o=i?.map(e=>e.requirement)||[],c=l?.map(e=>({id:e.id,title:e.title,lessons:(e.course_lessons||[]).sort((e,s)=>e.order_index-s.order_index).map(e=>({id:e.id,title:e.title,duration:e.duration,preview:e.preview}))}))||[],m={id:s.id,title:s.title,description:s.description,category:s.category,level:s.level,duration:s.duration||"",lessons:s.lessons_count||0,students:s.students_count||0,rating:s.rating||0,price:s.price,instructor:s.instructor,thumbnail:s.thumbnail||"/default-course.jpg",objectives:a,requirements:o,curriculum:c};n(m)}catch(e){console.error("예상치 못한 오류:",e),n(null)}finally{x(!1)}},checkEnrollment=async()=>{let{data:{user:e}}=await d.O.auth.getUser();e&&h(!1)},handleEnroll=async()=>{if(j)return;let{data:{user:e}}=await d.O.auth.getUser();if(!e){s.push("/login");return}if(r){v(!0);try{let{data:s}=await d.O.from("user_profiles").select("full_name, email").eq("id",e.id).single(),t={courseId:r.id,userId:e.id,amount:r.price,courseName:r.title,customerName:s?.full_name||e.email?.split("@")[0]||"사용자",customerEmail:e.email||"",customerPhone:""},i=await (0,c.kR)(t);i.success&&i.paymentUrl?window.location.href=i.paymentUrl:alert(i.message||"결제 링크 생성에 실패했습니다. 다시 시도해주세요.")}catch(e){console.error("결제 오류:",e),alert("결제 중 오류가 발생했습니다. 다시 시도해주세요.")}finally{v(!1)}}};return m||!r?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(a.default,{}),t.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"로딩 중..."})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(a.default,{}),(0,t.jsxs)("div",{className:"pt-20",children:[t.jsx("div",{className:"bg-gray-900 text-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsxs)("button",{onClick:()=>{sessionStorage.setItem("scrollPosition",window.scrollY.toString()),s.back()},className:"flex items-center text-gray-300 hover:text-white mb-6 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"뒤로가기"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("span",{className:"bg-emerald-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:r.category}),t.jsx("span",{className:"bg-gray-700 text-white px-3 py-1 rounded-full text-sm font-medium",children:r.level})]}),t.jsx("h1",{className:"text-3xl font-bold mb-4",children:r.title}),t.jsx("p",{className:"text-gray-300 mb-6",children:r.description}),(0,t.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,t.jsxs)("span",{children:[r.rating," (",r.students.toLocaleString(),"명 수강)"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:r.duration})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,t.jsxs)("span",{children:[r.lessons,"개 강의"]})]})]}),t.jsx("div",{className:"mt-6",children:(0,t.jsxs)("p",{className:"text-sm text-gray-300",children:["강사: ",r.instructor]})})]}),t.jsx("div",{children:(0,t.jsxs)("div",{className:"bg-white text-gray-900 rounded-lg p-6",children:[t.jsx("div",{className:"aspect-video bg-gray-200 rounded-lg mb-6 relative",children:t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("button",{className:"bg-emerald-500 hover:bg-emerald-600 text-white rounded-full p-4 transition-colors",children:t.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})}),t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("span",{className:"text-3xl font-bold",children:["₩",r.price.toLocaleString()]})}),u?t.jsx(o(),{href:`/courses/${r.id}/learn`,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white py-3 rounded-lg font-medium transition-colors block text-center",children:"학습 시작하기"}):t.jsx("button",{onClick:handleEnroll,disabled:j,className:"w-full bg-emerald-500 hover:bg-emerald-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white py-3 rounded-lg font-medium transition-colors",children:j?"결제 진행 중...":"수강 신청하기"}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,t.jsxs)("p",{className:"flex items-center mb-2",children:[t.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"평생 무제한 수강"]}),(0,t.jsxs)("p",{className:"flex items-center mb-2",children:[t.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"수료증 발급"]}),(0,t.jsxs)("p",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"30일 환불 보장"]})]})]})})]})]})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[t.jsx("div",{className:"border-b border-gray-200 mb-8",children:(0,t.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>g("overview"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"overview"===p?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"강의 소개"}),t.jsx("button",{onClick:()=>g("curriculum"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"curriculum"===p?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"커리큘럼"}),t.jsx("button",{onClick:()=>g("reviews"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"reviews"===p?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"수강평"})]})}),"overview"===p&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"학습 목표"}),t.jsx("ul",{className:"space-y-2",children:r.objectives.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("svg",{className:"w-5 h-5 text-emerald-500 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t.jsx("span",{className:"text-gray-700",children:e})]},s))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"수강 대상"}),t.jsx("ul",{className:"space-y-2",children:r.requirements.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-gray-700",children:e})]},s))})]})]}),t.jsx("div",{children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"강사 소개"}),(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full mr-4"}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:r.instructor}),t.jsx("p",{className:"text-sm text-gray-600",children:"Python 전문가"})]})]}),t.jsx("p",{className:"text-gray-700 text-sm",children:"10년 이상의 Python 개발 경험을 보유한 전문가입니다. 대기업과 스타트업에서 다양한 프로젝트를 진행했으며, 실무에서 바로 활용할 수 있는 지식을 전달합니다."})]})})]}),"curriculum"===p&&t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:r.curriculum.map((e,s)=>t.jsx("div",{className:"border-b last:border-b-0",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4",children:["섹션 ",s+1,": ",e.title]}),t.jsx("div",{className:"space-y-3",children:e.lessons.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-gray-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),t.jsx("span",{className:"text-gray-700",children:e.title}),e.preview&&t.jsx("span",{className:"ml-2 bg-emerald-100 text-emerald-700 px-2 py-1 rounded text-xs",children:"미리보기"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:e.duration})]},e.id))})]})},e.id))}),"reviews"===p&&t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"아직 수강평이 없습니다."})})})]})]})]})}},5702:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>a,__esModule:()=>l,default:()=>o});var t=r(9894);let i=(0,t.createProxy)(String.raw`/home/mustard-3/Documents/code/skool/frontend/app/courses/[id]/page.tsx`),{__esModule:l,$$typeof:a}=i,n=i.default,o=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[222,343,905,636,612,646],()=>__webpack_exec__(2601));module.exports=r})();