"use strict";(()=>{var e={};e.id=863,e.ids=[863],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5769:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>i,originalPathname:()=>u,requestAsyncStorage:()=>_,routeModule:()=>n,serverHooks:()=>c,staticGenerationAsyncStorage:()=>P,staticGenerationBailout:()=>l});var s={};a.r(s),a.d(s,{POST:()=>POST});var r=a(6963),p=a(5533),o=a(5999);async function POST(e){try{let t=await e.json(),a={cst_id:process.env.PAYPLE_CST_ID||"test",custKey:process.env.PAYPLE_CUST_KEY||"test_DF55F29DA654A8CBC0F0A9DD4B556486",PCD_PAYCANCEL_FLAG:"Y"},s=await fetch("https://cpay.payple.kr/php/auth.php",{method:"POST",headers:{"Content-Type":"application/json",Referer:"http://localhost:3000"},body:JSON.stringify(a)}),r=await s.json();if(console.log("Payple 인증 결과:",r),"success"!==r.result||!r.access_token)return o.Z.json({success:!1,message:r.result_msg||"인증 실패"},{status:400});let p={PCD_CST_ID:process.env.PAYPLE_CST_ID||"test",PCD_CUST_KEY:process.env.PAYPLE_CUST_KEY||"test_DF55F29DA654A8CBC0F0A9DD4B556486",PCD_AUTH_KEY:r.access_token,PCD_PAY_TYPE:t.payType||"card",PCD_PAY_WORK:t.payWork||"PAYMENT",PCD_PAY_GOODS:t.payGoods,PCD_PAY_TOTAL:t.payTotal,PCD_PAY_OID:t.payOid,PCD_PAYER_NAME:t.payerName,PCD_PAYER_EMAIL:t.payerEmail,PCD_PAYER_HP:t.payerHp||"",PCD_LINK_EXPIRED_DATE:t.linkExpiredDate,PCD_RETURN_URL:t.returnUrl,PCD_CANCEL_URL:t.cancelUrl,PCD_WEBHOOK_URL:t.webhookUrl,PCD_TAXSAVE_FLAG:"Y",PCD_PAY_BANK:"",PCD_REGULER_FLAG:"N"},n=await fetch("https://cpay.payple.kr/php/link/api/LinkRegAct.php?ACT_=LINKREG",{method:"POST",headers:{"Content-Type":"application/json",Referer:"http://localhost:3000"},body:JSON.stringify(p)}),_=await n.json();if(console.log("Payple 링크 생성 결과:",_),"success"===_.PCD_PAY_RST&&_.PCD_LINK_URL)return o.Z.json({success:!0,paymentUrl:_.PCD_LINK_URL,linkId:_.PCD_LINK_ID,message:"결제 링크 생성 성공",data:_});return o.Z.json({success:!1,message:_.PCD_PAY_MSG||"결제 링크 생성 실패"},{status:400})}catch(e){return console.error("결제 링크 생성 오류:",e),o.Z.json({success:!1,message:"결제 링크 생성 중 오류가 발생했습니다."},{status:500})}}let n=new r.AppRouteRouteModule({definition:{kind:p.x.APP_ROUTE,page:"/api/payment/payple/create-link/route",pathname:"/api/payment/payple/create-link",filename:"route",bundlePath:"app/api/payment/payple/create-link/route"},resolvedPagePath:"/home/mustard-3/Documents/code/skool/frontend/app/api/payment/payple/create-link/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:_,staticGenerationAsyncStorage:P,serverHooks:c,headerHooks:i,staticGenerationBailout:l}=n,u="/api/payment/payple/create-link/route"}};var t=require("../../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[546],()=>__webpack_exec__(5769));module.exports=a})();