(()=>{var e={};e.id=229,e.ids=[229],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2495:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>l});var r=s(6577),a=s(5533),n=s(443),i=s.n(n),o=s(3320),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l=["",{children:["admin",{children:["news",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7625)),"/home/mustard-3/Documents/code/skool/frontend/app/admin/news/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1150)),"/home/mustard-3/Documents/code/skool/frontend/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5818)),"/home/mustard-3/Documents/code/skool/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1459,23)),"next/dist/client/components/not-found-error"]}],c=["/home/mustard-3/Documents/code/skool/frontend/app/admin/news/page.tsx"],x="/admin/news/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/news/page",pathname:"/admin/news",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9538:(e,t,s)=>{Promise.resolve().then(s.bind(s,4035))},4035:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>NewsManagement});var r=s(2406),a=s(404),n=s(5731),i=s.n(n),o=s(5434);function NewsManagement(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{fetchNews()},[]);let fetchNews=async()=>{try{let e=(await o.O.auth.getSession()).data.session?.access_token,s=await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/news`,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){let e=await s.json();t(e)}}catch(e){console.error("Error fetching news:",e)}finally{n(!1)}},handleDelete=async e=>{if(confirm("정말로 이 뉴스를 삭제하시겠습니까?"))try{let t=(await o.O.auth.getSession()).data.session?.access_token,s=await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/news/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});s.ok&&fetchNews()}catch(e){console.error("Error deleting news:",e)}},togglePublish=async(e,t)=>{try{let s=(await o.O.auth.getSession()).data.session?.access_token,r=await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/news/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({published:!t,publishedAt:t?null:new Date().toISOString()})});r.ok&&fetchNews()}catch(e){console.error("Error updating news:",e)}};return s?r.jsx("div",{className:"text-white",children:"Loading..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"뉴스 관리"}),r.jsx(i(),{href:"/admin/news/new",className:"bg-emerald-500 hover:bg-emerald-600 text-black px-4 py-2 rounded-lg font-medium transition-colors",children:"새 뉴스 작성"})]}),r.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-800",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"제목"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"요약"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"상태"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"작성일"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"작업"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-white",children:e.title}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["/",e.slug]})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-300 line-clamp-2",children:e.summary})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>togglePublish(e.id,e.published),className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.published?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:e.published?"게시됨":"미게시"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.createdAt).toLocaleDateString("ko-KR")}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx(i(),{href:`/admin/news/${e.id}/edit`,className:"text-emerald-400 hover:text-emerald-300 mr-4",children:"수정"}),r.jsx("button",{onClick:()=>handleDelete(e.id),className:"text-red-400 hover:text-red-300",children:"삭제"})]})]},e.id))})]})})]})}},7625:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>d});var r=s(9894);let a=(0,r.createProxy)(String.raw`/home/mustard-3/Documents/code/skool/frontend/app/admin/news/page.tsx`),{__esModule:n,$$typeof:i}=a,o=a.default,d=o}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[222,343,905,636,956],()=>__webpack_exec__(2495));module.exports=s})();