exports.id=956,exports.ids=[956],exports.modules={3931:e=>{function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=3931,e.exports=webpackEmptyContext},3683:()=>{},4041:()=>{},6636:(e,t,s)=>{Promise.resolve().then(s.bind(s,336))},336:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>AdminLayout});var n=s(2406),i=s(404),r=s(6460),l=s(5731),o=s.n(l),a=s(5434);function AdminLayout({children:e}){let t=(0,r.useRouter)(),[s,l]=(0,i.useState)(!1),[d,m]=(0,i.useState)(!0);(0,i.useEffect)(()=>{checkAdminAuth()},[]);let checkAdminAuth=async()=>{try{console.log("=== Admin Auth Check Started ===");let{data:{user:e}}=await a.O.auth.getUser();if(!e){console.log("❌ No user found, redirecting to login"),t.push("/login");return}console.log("✅ User found:",{id:e.id,email:e.email});let{data:s,error:n}=await a.O.from("user_profiles").select("role, email").eq("id",e.id).single();if(console.log("\uD83D\uDCCA Profile query result:",{profile:s,error:n}),n){if(console.log("❌ Error fetching profile:",n.message),["admin@aiskool.com","admin@example.com","coconut31@naver.com"].includes(e.email||"")){console.log("✅ Admin access granted by email fallback"),l(!0);return}t.push("/");return}s?.role==="admin"?(console.log("✅ Admin access granted by role"),l(!0)):(console.log("❌ User is not admin. Role:",s?.role),t.push("/"))}catch(e){console.error("❌ Unexpected error:",e),t.push("/")}finally{m(!1),console.log("=== Admin Auth Check Completed ===")}};return d?n.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsx("div",{className:"text-white",children:"Loading..."})}):s?(0,n.jsxs)("div",{className:"min-h-screen bg-black",children:[n.jsx("nav",{className:"bg-gray-900 border-b border-gray-800",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[n.jsx(o(),{href:"/admin",className:"text-emerald-400 font-bold text-xl",children:"AIskool! Admin"}),(0,n.jsxs)("div",{className:"ml-10 flex items-baseline space-x-4",children:[n.jsx(o(),{href:"/admin",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"대시보드"}),n.jsx(o(),{href:"/admin/courses",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"강의 관리"}),n.jsx(o(),{href:"/admin/news",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"뉴스 관리"}),n.jsx(o(),{href:"/admin/users",className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"사용자 관리"})]})]}),n.jsx("div",{children:n.jsx("button",{onClick:()=>{a.O.auth.signOut(),t.push("/")},className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"로그아웃"})})]})})}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]}):null}},5434:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var n=s(1625);let i="https://pgtsxojnziyfkgghzmib.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBndHN4b2pueml5ZmtnZ2h6bWliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MDEwMjMsImV4cCI6MjA2NTk3NzAyM30.BP9rHr3lfNhMCYPLulyj3ia2z8Q9sbsc1xqS1mjVJ8g",l=i&&r?(0,n.createClient)(i,r):null},1150:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>a});var n=s(9894);let i=(0,n.createProxy)(String.raw`/home/mustard-3/Documents/code/skool/frontend/app/admin/layout.tsx`),{__esModule:r,$$typeof:l}=i,o=i.default,a=o}};