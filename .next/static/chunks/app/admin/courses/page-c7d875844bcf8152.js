(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{4946:function(e,t,s){Promise.resolve().then(s.bind(s,146))},146:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AdminCoursesPage}});var r=s(7821),a=s(8078),i=s(6871),n=s.n(i),l=s(1910);function AdminCoursesPage(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{fetchCourses()},[]);let fetchCourses=async()=>{try{let{data:e,error:s}=await l.O.from("courses").select("\n          id,\n          title,\n          description,\n          category,\n          level,\n          duration,\n          lessons_count,\n          students_count,\n          rating,\n          price,\n          instructor,\n          thumbnail,\n          created_at\n        ").order("created_at",{ascending:!1});if(s){console.error("강의 목록 조회 실패:",s),t([]);return}let r=e.map(e=>({id:e.id,title:e.title,description:e.description,category:e.category,level:e.level,duration:e.duration||"",lessons:e.lessons_count||0,students:e.students_count||0,rating:e.rating||0,price:e.price,instructor:e.instructor,thumbnail:e.thumbnail||"",objectives:[],requirements:[],curriculum:[]}));t(r)}catch(e){console.error("예상치 못한 오류:",e),t([])}finally{i(!1)}},deleteCourse=async s=>{if(confirm("정말로 이 강의를 삭제하시겠습니까?"))try{let{error:r}=await l.O.from("courses").delete().eq("id",s);if(r){console.error("강의 삭제 실패:",r),alert("강의 삭제에 실패했습니다: "+r.message);return}t(e.filter(e=>e.id!==s)),alert("강의가 성공적으로 삭제되었습니다.")}catch(e){console.error("예상치 못한 오류:",e),alert("강의 삭제 중 오류가 발생했습니다.")}};return s?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"강의 관리"}),(0,r.jsx)(n(),{href:"/admin/courses/new",className:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"새 강의 등록"})]}),(0,r.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"강의명"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"카테고리"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"레벨"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"가격"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"수강생"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"평점"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"작업"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-800",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded bg-gray-700"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:e.instructor})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-800",children:e.category})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:e.level})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:["₩",e.price.toLocaleString()]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[e.students.toLocaleString(),"명"]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:["★ ",e.rating]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(n(),{href:"/admin/courses/".concat(e.id,"/edit"),className:"text-emerald-400 hover:text-emerald-300",children:"수정"}),(0,r.jsx)("button",{onClick:()=>deleteCourse(e.id),className:"text-red-400 hover:text-red-300",children:"삭제"})]})})]},e.id))})]})})}),0===e.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-400",children:"등록된 강의가 없습니다."})})]})}},1910:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var r=s(4744);let a="https://pgtsxojnziyfkgghzmib.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBndHN4b2pueml5ZmtnZ2h6bWliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MDEwMjMsImV4cCI6MjA2NTk3NzAyM30.BP9rHr3lfNhMCYPLulyj3ia2z8Q9sbsc1xqS1mjVJ8g",n=a&&i?(0,r.eI)(a,i):null}},function(e){e.O(0,[144,871,115,835,744],function(){return e(e.s=4946)}),_N_E=e.O()}]);