(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{2155:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(1984)},2619:function(e,t,r){Promise.resolve().then(r.bind(r,1839))},1839:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return NewNews}});var n=r(7821),o=r(8078),i=r(6179),l=r(1910),a=r(2155);function NewNews(){let e=(0,i.useRouter)(),[t,r]=(0,o.useState)(!1),[u,s]=(0,o.useState)({title:"",slug:"",summary:"",content:"",imageUrl:"",published:!1}),handleSubmit=async t=>{t.preventDefault(),r(!0);try{var n;let t=null===(n=(await l.O.auth.getSession()).data.session)||void 0===n?void 0:n.access_token,r=await fetch("".concat(a.env.NEXT_PUBLIC_API_URL,"/api/news"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({...u,publishedAt:u.published?new Date().toISOString():null})});r.ok?e.push("/admin/news"):alert("뉴스 작성에 실패했습니다.")}catch(e){console.error("Error creating news:",e),alert("뉴스 작성 중 오류가 발생했습니다.")}finally{r(!1)}},generateSlug=e=>e.toLowerCase().replace(/[^a-z0-9가-힣]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-8",children:"새 뉴스 작성"}),(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-300 mb-2",children:"제목"}),(0,n.jsx)("input",{type:"text",id:"title",value:u.title,onChange:e=>{s({...u,title:e.target.value,slug:generateSlug(e.target.value)})},className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:outline-none focus:border-emerald-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-300 mb-2",children:"URL 슬러그"}),(0,n.jsx)("input",{type:"text",id:"slug",value:u.slug,onChange:e=>s({...u,slug:e.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:outline-none focus:border-emerald-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-300 mb-2",children:"요약"}),(0,n.jsx)("textarea",{id:"summary",value:u.summary,onChange:e=>s({...u,summary:e.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:outline-none focus:border-emerald-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-300 mb-2",children:"내용"}),(0,n.jsx)("textarea",{id:"content",value:u.content,onChange:e=>s({...u,content:e.target.value}),rows:10,className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:outline-none focus:border-emerald-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"이미지 URL (선택사항)"}),(0,n.jsx)("input",{type:"url",id:"imageUrl",value:u.imageUrl,onChange:e=>s({...u,imageUrl:e.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:outline-none focus:border-emerald-500"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:"published",checked:u.published,onChange:e=>s({...u,published:e.target.checked}),className:"w-4 h-4 text-emerald-600 bg-gray-900 border-gray-800 rounded focus:ring-emerald-500"}),(0,n.jsx)("label",{htmlFor:"published",className:"ml-2 text-sm text-gray-300",children:"즉시 게시"})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("button",{type:"submit",disabled:t,className:"bg-emerald-500 hover:bg-emerald-600 text-black px-6 py-2 rounded-lg font-medium transition-colors disabled:opacity-50",children:t?"저장 중...":"저장"}),(0,n.jsx)("button",{type:"button",onClick:()=>e.push("/admin/news"),className:"bg-gray-800 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"취소"})]})]})]})}},1910:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var n=r(4744);let o="https://pgtsxojnziyfkgghzmib.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBndHN4b2pueml5ZmtnZ2h6bWliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MDEwMjMsImV4cCI6MjA2NTk3NzAyM30.BP9rHr3lfNhMCYPLulyj3ia2z8Q9sbsc1xqS1mjVJ8g",l=o&&i?(0,n.eI)(o,i):null},1984:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var i=[],l=!1,a=-1;function cleanUpNextTick(){l&&n&&(l=!1,n.length?i=n.concat(i):a=-1,i.length&&drainQueue())}function drainQueue(){if(!l){var e=runTimeout(cleanUpNextTick);l=!0;for(var t=i.length;t;){for(n=i,i=[];++a<t;)n&&n[a].run();a=-1,t=i.length}n=null,l=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new Item(e,t)),1!==i.length||l||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},i=!0;try{t[e](o,o.exports,__nccwpck_require__),i=!1}finally{i&&delete r[e]}return o.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()},6179:function(e,t,r){e.exports=r(5353)}},function(e){e.O(0,[144,115,835,744],function(){return e(e.s=2619)}),_N_E=e.O()}]);